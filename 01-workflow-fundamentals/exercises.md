# Exercises: Workflow Fundamentals

Complete these exercises to master GitHub Actions workflows and advanced pipeline features.

---

## Exercise 1: Scheduled Workflows (Easy)

**Objective:** Create a workflow that runs on a schedule.

**Instructions:**
1. Create `.github/workflows/ex1-scheduled.yml`
2. Configure the workflow to run:
   - Daily at 2:00 AM UTC
   - Every Monday at 9:00 AM UTC
3. Add steps that print:
   - Current date and time
   - Workflow trigger reason
4. Push and verify execution via Actions tab

**Cron Syntax Help:**
- Daily 2 AM: `0 2 * * *`
- Monday 9 AM: `0 9 * * 1`

**Acceptance Criteria:**
- Workflow passes YAML validation
- Cron expressions are correct
- Workflow appears in Actions tab
- Next scheduled run time is visible

---

## Exercise 2: Workflow Dispatch (Easy)

**Objective:** Create a manual trigger workflow with input parameters.

**Instructions:**
1. Create `.github/workflows/ex2-manual.yml`
2. Add `workflow_dispatch` with inputs:
   - `environment` (required): dropdown with [dev, staging, prod]
   - `version` (optional): default to "1.0.0"
3. Add steps that print both input values
4. Manually trigger from Actions tab with different parameters

**Hint:** Use `workflow_dispatch` with `inputs` section

**Acceptance Criteria:**
- Workflow has `workflow_dispatch` trigger
- Input dropdown works in Actions UI
- Both parameters print correctly

---

## Exercise 3: Job Outputs (Medium)

**Objective:** Pass data between jobs using outputs.

**Instructions:**
1. Create `.github/workflows/ex3-outputs.yml`
2. Create two jobs:
   - `job-one`: Generates an output `version=1.2.3`
   - `job-two`: Depends on job-one and prints the version
3. Use `needs:` for dependency
4. Use context to access job outputs: `${{ needs.job-one.outputs.version }}`

**Hint:** Use `$GITHUB_OUTPUT` to set outputs

**Acceptance Criteria:**
- Job dependencies work correctly
- Outputs are generated by first job
- Second job receives and prints output

---

## Exercise 4: Matrix Strategy (Medium)

**Objective:** Run jobs across multiple configurations.

**Instructions:**
1. Create `.github/workflows/ex4-matrix.yml`
2. Create a job with matrix strategy:
   - OS: ubuntu-latest, windows-latest, macos-latest
   - Node: 16, 18, 20
3. Each job should print:
   - OS name: `${{ runner.os }}`
   - Node version: `${{ matrix.node }}`
4. Verify 9 total jobs are created (3 OS Ã— 3 Node versions)

**Acceptance Criteria:**
- Matrix creates 9 job variations
- Each job shows correct OS and Node version
- All jobs complete successfully

---

## Exercise 5: Conditional Jobs (Medium)

**Objective:** Control job execution based on conditions.

**Instructions:**
1. Create `.github/workflows/ex5-conditional.yml`
2. Create these jobs:
   - `setup`: Always runs
   - `deploy-dev`: Runs on push to develop branch
   - `deploy-prod`: Runs only on push to main branch
   - `notify`: Always runs regardless of previous results
3. Test by pushing to different branches

**Hint:** Use `if:` with `github.ref`

**Acceptance Criteria:**
- Correct jobs run based on branch
- `notify` job always runs
- Conditional logic is clear in logs

---

## Exercise 6: Artifact Management (Medium)

**Objective:** Create, upload, and download artifacts.

**Instructions:**
1. Create `.github/workflows/ex6-artifacts.yml`
2. Create three jobs:
   - `generate`: Create a test file and upload artifact
   - `download`: Download the artifact
   - `verify`: Download again and verify file contents
3. Each job should depend on the previous one
4. Use appropriate actions for upload/download

**Acceptance Criteria:**
- Artifacts upload successfully
- Download jobs receive artifacts
- File contents are verified
- Artifacts available in Actions tab

---

## Exercise 7: Environment Variables (Medium)

**Objective:** Use variables at different scopes.

**Instructions:**
1. Create `.github/workflows/ex7-env.yml`
2. Define variables at three levels:
   - Workflow: `WORKFLOW_VAR: "workflow-level"`
   - Job: `JOB_VAR: "job-level"`
   - Step: `STEP_VAR: "step-level"`
3. Create steps that print:
   - All three variables
   - Demonstrate variable scope
   - Show what's accessible where

**Acceptance Criteria:**
- All three variable levels work
- Scoping is demonstrated correctly
- Variable precedence is clear

---

## Exercise 8: Using GitHub Actions (Medium)

**Objective:** Integrate community actions in your workflow.

**Instructions:**
1. Create `.github/workflows/ex8-actions.yml`
2. Use these actions:
   - `actions/checkout@v3` - Clone repo
   - `actions/setup-node@v3` - Setup Node.js 18.x
   - `actions/cache@v3` - Cache npm dependencies
3. Add steps showing:
   - Repository contents
   - Node version
   - npm version
4. Demonstrate caching working (run twice)

**Acceptance Criteria:**
- All actions execute successfully
- Node 18.x is set up correctly
- Cache is utilized on second run
- File structure is displayed

---

## Exercise 9: Advanced Conditionals (Medium)

**Objective:** Use conditional expressions in workflows.

**Instructions:**
1. Create `.github/workflows/ex9-advanced-conditions.yml`
2. Add jobs with these conditions:
   - Run on push to main: `if: github.event_name == 'push' && github.ref == 'refs/heads/main'`
   - Run on pull requests: `if: github.event_name == 'pull_request'`
   - Run only on success: `if: success()`
   - Run only on failure: `if: failure()`
3. Test with different triggers and outcomes

**Acceptance Criteria:**
- Each condition triggers appropriately
- Conditional logic prevents unwanted execution
- Status functions work correctly

---

## Exercise 10: Complete Multi-Stage Pipeline (Medium)

**Objective:** Build a realistic three-stage pipeline.

**Instructions:**
1. Create `.github/workflows/ex10-pipeline.yml`
2. Implement three stages:
   - **Build**: Checkout, setup, compile
   - **Test**: Depends on build, runs tests, uploads coverage
   - **Deploy**: Depends on test, only runs on main branch
3. Add:
   - Artifact upload/download between stages
   - Proper job dependencies
   - Conditional deployment
   - Status notifications
4. Test full workflow

**Acceptance Criteria:**
- All three stages execute in order
- Build artifacts flow between stages
- Deploy stage only runs on main
- Execution time is logged
- Workflow completes successfully

---

## Self-Assessment

After completing these exercises, you should be able to:

- [ ] Create scheduled workflows with cron expressions
- [ ] Use workflow_dispatch for manual triggers
- [ ] Pass data between jobs using outputs
- [ ] Implement matrix strategy for multiple configurations
- [ ] Use conditional execution based on context
- [ ] Manage artifacts across jobs
- [ ] Work with variables at different scopes
- [ ] Integrate GitHub Marketplace actions
- [ ] Use advanced conditional expressions
- [ ] Build multi-stage pipelines

**Next:** Review the [solutions.md](solutions.md) file for reference implementations.

---

**Difficulty:** Medium | **Time:** 3-4 hours | **Prerequisites:** Module 01 completion
